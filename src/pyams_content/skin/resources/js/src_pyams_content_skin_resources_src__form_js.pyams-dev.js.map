{"version":3,"file":"src_pyams_content_skin_resources_src__form_js.pyams-dev.js","mappings":"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","sources":["webpack://pyams_default_theme/./src/pyams_content/skin/resources/src/_form.js"],"sourcesContent":["\n\nimport 'jquery-validation';\n\nconst PyAMS_form = {\n\n\tinit: (forms) => {\n\n\t\t$('label', forms).removeClass('col-md-3');\n\t\t$('.col-md-9', forms).removeClass('col-md-9');\n\t\t$('input, select, textarea', forms).addClass('form-control');\n\t\t$('button', forms).addClass('border');\n\t\t$('button[type=\"submit\"]', forms).addClass('btn-primary');\n\n\t\tconst lang = $('html').attr('lang');\n\t\tconst defaultOptions = {\n\t\t\tsubmitHandler: PyAMS_form.submitHandler,\n\t\t\tmessages: {}\n\t\t};\n\n\t\tconst getFormOptions = (form, options) => {\n\t\t\t$('[data-ams-validate-messages]', form).each((idx, elt) => {\n\t\t\t\toptions.messages[$(elt).attr('name')] = $(elt).data('ams-validate-messages');\n\t\t\t});\n\t\t\treturn options;\n\t\t};\n\n\t\tconst validateForms = () => {\n\t\t\t$(forms).each((idx, form) => {\n\t\t\t\tconst options = $.extend({}, defaultOptions);\n\t\t\t\t$(form).validate(getFormOptions(form, options));\n\t\t\t});\n\t\t}\n\n\t\tif (lang === 'fr') {\n\t\t\timport(\"jquery-validation/dist/localization/messages_fr\").then(() => {\n\t\t\t\tvalidateForms();\n\t\t\t});\n\t\t} else {\n\t\t\tvalidateForms();\n\t\t}\n\t},\n\n\n\tsubmitHandler: (form) => {\n\n\t\tconst doSubmit = (form) => {\n\t\t\tconst\n\t\t\t\tbutton = $('button[type=\"submit\"]', form),\n\t\t\t\tname = button.attr('name'),\n\t\t\t\tinput = $('input[name=\"' + name + '\"]', form);\n\t\t\tif (input.length === 0) {\n\t\t\t\t$('<input />')\n\t\t\t\t\t.attr('type', 'hidden')\n\t\t\t\t\t.attr('name', name)\n\t\t\t\t\t.attr('value', button.attr('value'))\n\t\t\t\t\t.appendTo(form);\n\t\t\t}\n\t\t\tform.submit();\n\t\t};\n\n\t\tif (window.grecaptcha) {  // check if recaptcha was loaded\n\t\t\tconst captcha_key = $(form).data('ams-form-captcha-key');\n\t\t\tgrecaptcha.execute(captcha_key, {\n\t\t\t\taction: 'form_submit'\n\t\t\t}).then((token) => {\n\t\t\t\t$('.state-error', form).removeClass('state-error');\n\t\t\t\t$('input[name=\"g-recaptcha-response\"]', form).val(token);\n\t\t\t\tdoSubmit(form);\n\t\t\t});\n\t\t} else {\n\t\t\tdoSubmit(form);\n\t\t}\n\t}\n\n};\n\n\nexport default PyAMS_form;\n"],"names":["PyAMS_form","init","forms","$","removeClass","addClass","lang","attr","defaultOptions","submitHandler","messages","getFormOptions","form","options","each","idx","elt","data","validateForms","extend","validate","then","doSubmit","button","name","input","length","appendTo","submit","window","grecaptcha","captcha_key","execute","action","token","val"],"sourceRoot":""}